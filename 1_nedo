#include <iostream>
#include <vector>

using namespace std;


int main()
{

    long n;
    cin >> n;

    vector<vector<int>> matr(4, vector<int>(4, 0));

    for (int i = 0; i < 4; i++)
    {
        for (int j = 0; j < 4; j++)
        {
            cin >> matr[i][j];
        }
    }


    vector<vector<long long>> dp(n, vector<long long>(4, 0));
    dp[0][0] = 1;
    dp[0][1] = 1;
    dp[0][2] = 1;
    dp[0][3] = 1;
    for (int i = 1; i < n; i++)
    {
        if (matr[0][0] == 1)
            dp[i][0] += dp[i - 1][0];
        if (matr[0][1] == 1)
            dp[i][0] += dp[i - 1][1];
        if (matr[0][2] == 1)
            dp[i][0] += dp[i - 1][2];
        if (matr[0][3] == 1)
            dp[i][0] += dp[i - 1][3];

        if (matr[1][0] == 1)
            dp[i][1] += dp[i - 1][0];
        if (matr[1][1] == 1)
            dp[i][1] += dp[i - 1][1];
        if (matr[1][2] == 1)
            dp[i][1] += dp[i - 1][2];
        if (matr[1][3] == 1)
            dp[i][1] += dp[i - 1][3];

        if (matr[2][0] == 1)
            dp[i][2] += dp[i - 1][0];
        if (matr[2][1] == 1)
            dp[i][2] += dp[i - 1][1];
        if (matr[2][2] == 1)
            dp[i][2] += dp[i - 1][2];
        if (matr[2][3] == 1)
            dp[i][2] += dp[i - 1][3];

        if (matr[3][0] == 1)
            dp[i][3] += dp[i - 1][0];
        if (matr[3][1] == 1)
            dp[i][3] += dp[i - 1][1];
        if (matr[3][2] == 1)
            dp[i][3] += dp[i - 1][2];
        if (matr[3][3] == 1)
            dp[i][3] += dp[i - 1][3];
    }
    long long sum = 0;
    for (int i = 0; i < 4; i++)
    {
        sum += dp[n - 1][i];
    }
    
    cout << sum % 1000000007;
    
}
